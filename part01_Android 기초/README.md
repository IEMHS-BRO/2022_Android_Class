# 1. Android Project 살펴보기

### 프로젝트 파일 구조

![스크린샷 2022-04-15 오전 
1.53.01.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1e9ac3ff-782b-49f3-854c-1c2171b96399/스크린샷_2022-04-15_오전_1.53.01.png)

1. **manifests** : 앱의 대한 기본 특성, 정보를 설명하며, 앱의 구성 요소를 
정의함.
2. **java** : 앱의 동작을 나타내는 코드
3. **res** : 앱에서 사용하는 리소스. (이미지, 사용자 인터페이스 문자열, 
레이아웃, 애니메이션 지침 등)
4. **build.gradle(project, module)** : 앱의 빌드 정보 및 동작을 설명함.

# 2. Android 앱의 기본 항목

## 1) 앱 구성 요소

앱 구성 요소는 안드로이드 앱의 필수적인 요소로 사용자 혹은 시스템이 
접근하는 진입점이다.
각각의 구성 요소는 뚜렷한 목적을 수행하며, 생명 주기가 있어 상황에 맞게 
생성하고 소멸된다.

> **안드로이드의 4대 컴포넌트**
> 

- **Activity**
    
    사용자와 상호작용에 사용하는 구성 요소. 사용자 인터페이스를 포함한 
화면 하나를 나타낸다.
    
    <aside>
    👉🏻 예) 이메일 앱 → 새 이메일 목록 표시 화면, 이메일 작성 화면, 
이메일 읽는 화면
    
    </aside>
    
- **Service**
    
    백그라운드에서 앱을 계속 실행하기 위한 구성요소.
    오랫동안 실행되는 작업을 수행하거나, 원격 프로세스를 위한 작업을 
수행한다.
    
    <aside>
    👉🏻 예) 음악 재생, 백그라운드에서의 데이터 동기화
    
    </aside>
    
- **Broadcast Receiver**
    
    시스템이 이벤트를 앱에 전달하도록 지원하는 구성요소.
    앱이 시스템 전체의 브로드캐스드 알림에 응답할 수 있게 한다.
    
    <aside>
    👉🏻 ex) 배터리 부족 알림, 사진 캡쳐 알림, 데이터 다운로드 완료 알림
    
    </aside>
    
- **Content Provider**
    
    애플리케이션에 자체적으로 저장된 데이터를 공유하거나, 다른 앱이 저장한 
데이터에 대해 접근할 수 있는 방법을 제공하는 구성요소.
    
    <aside>
    👉🏻 ex) 오디오, 동영상, 이미지, 개인 연락처 정보, 캘린더 등
    
    </aside>
    

> **안드로이드 시스템 디자인의 특징**
> 

1. **다른 앱의 구성 요소를 시작할 수 있음.**
    
    Android 시스템 디자인은 어떤 앱이든 다른 앱의 구성 요소를 시작할 수 
있다는 특징이 있다.
    
    <aside>
    👉🏻 **ex) 기기 카메라로 사진을 찍고 싶은 경우**
    → 이미 이런 작업을 수행하는 다른 앱이 있을 가능성이 있음. 이럴 경우, 
사진을 찍는 기능을 직접 개발하는 대신 이미 동일한 작업을 수행하는 다른 
앱을 사용하면 됨.
    
    
![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/68091ced-1038-4ad6-8a02-56c39c94246e/Untitled.png)
    
    </aside>
    

1. **단일한 진입 지점이 없음. (ex. main() 함수가 없음)**
    
    시스템이 구성 요소를 시작할 때 그 앱에 대한 프로세스를 시작하고, 해당 
구성 요소에 필요한 클래스를 인스턴스화 한다.
    
    <aside>
    👉🏻 내 앱에서 카메라 앱의 사진을 찍는 액티비티를 시작하면, 이 
액티비티는 내가 만든 앱의 프로세스가 아닌 카메라 앱에 속한 프로세스에 
실행된다.
    
    
![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8b98fe97-861a-4f57-944f-9d35c2aeab68/Untitled.png)
    
    </aside>
    
    → 그렇기에 대부분의 다른 프로그램과 달리 Android 앱은 단일한 진입 
지점이 없게 된다.
    

1. **다른 앱의 구성 요소를 직접적으로 활성화 할 수는 없음.**
    
    시스템이 다른 앱에 대한 액세스를 제한하는 파일 권한을 가지고 각 앱을 
별도의 프로세스에서 실행하기 때문에, 다른 앱의 구성요소를 직접 활성화 할 
수는 없다.
    
    <aside>
    👉🏻 그렇지만 Android의 시스템으로는 이것이 가능하다. 다른 앱에 있는 
구성 요소를 활성화하려면 시스템에 메시지를 전달하여 특성 구성 요소를 
시작하고자 함을 밝혀야 한다. 그러면 시스템은 대신 해당 구성 요소를 
활성화해준다.
    
    
![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f87e4111-8af2-44ff-9004-bd2b6258fb7b/Untitled.png)
    
    </aside>
    

### **구성 요소 활성화**

구성 요소 네 가지 중 세 가지(Activity, Service, BroadcastReceiver)는 
**인텐트**라는 비동기식 메시지로 활성화 된다. 인텐트는 런타임에서 각 구성 
요소를 바인딩 한다. **일종의 메신저**라고 생각하면 된다.

<aside>
👉🏻 구성 요소가 어느 앱에 속하든 관계없이 다른 구성 요소로 부터 작업을 
요청하는 역할을 함.

</aside>

인텐트는 `Intent` 객체로 생성되며, 이것이 **특정 구성 요소를 활성화 할 지 
(*= 명시적 인텐트*)**, 아니면 **구성 요소의 특정 유형을 활성화 할 지(*= 
암시적 인텐트*)** 나타내는 메시지를 정의한다.

1. **Activity와 Service**
    - 인텐트는 수행할 작업을 정의
        - ex) 무언가를 보거나 보내는 작업
    - 작업을 수행할 데이터의 URI를 지정 가능
        - ex) 액티비티에 이미지를 표시하거나 웹 페이지를 열라는 요청을 
전달
    - 결과를 반환
2. **Broadcast Receiver**
    - 인텐트는 단순히 브로드캐스트될 알림을 정의
        - ex) 배터리 잔량이 낮다는 것을 나타내는 브로드캐스트에는 *배터리 
부족*을 나타내는 작업 문자열만 포함
3. **Content Provider**
    - 인텐트로 활성화 되지 않음.
    - `ContentResolver`가 보낸 요청의 대상으로 지정되면 활성화됨.

## 2) 매니페스트 파일

Android 시스템이 앱 구성 요소를 시작하려면 시스템은 우선 앱의 매니페스트 
파일 (`AndroidManifest.xml`)을 읽어서 해당 구성 요소가 존재하는지 
확인한다.

<aside>
👉🏻 앱은 이 파일 안에 모든 구성 요소를 선언해야 하며, 이 파일은 앱 
프로젝트 디렉토리의 루트에 있어야 한다.

</aside>

> **매니페스트 파일의 역할**
> 
- 앱의 구성 요소를 선언
- 앱이 요구하는 모든 사용자 권한을 식별 (ex. 인터넷 액세스, 파일 및 위치에 
대한 읽기 권한)
- 앱이 어느 API를 사용하는지를 근거로 앱에서 요구하는 최소 API 레벨을 선언
- 앱에서 사용하거나 요구하는 하드웨어 및 소프트웨어 기능을 선언 (ex. 
카메라, 블루투스, 멀티터치)
- 앱이 링크되어야 하는 API 라이브러리를 선언 (ex. Google Maps Library)

### 구성 요소 선언

매니페스트의 주요한 작업은 시스템에 앱의 구성 요소에 대해 알리는 것이다. 
다음은 매니페스트 파일에 액티비티를 선언한 코드 스니펫이다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest ... >
    <application android:icon="@drawable/app_icon.png" ... >
        <activity android:name="com.iemhs.lecture0.ExampleActivity"
                  android:label="@string/example_label" ... >
        </activity>
        ...
    </application>
</manifest>
```

- `android:icon` : 앱을 식별하는 아이콘에 대한 리소스
- `android:name` : 정규화된 클래스 이름을 나타냄
- `android:label` : 사용자에게 표시되는 레이블

다음 요소를 사용해 모든 앱의 구성 요소를 매니페스트에 선언해야 한다.

- Activity의 경우 `<activity>` 요소
- Service의 경우 `<service>` 요소
- Broadcdast Receiver의 경우 `<receiver>` 요소
- Content Provider의 경우 `<provider>` 요소

### 구성 요소 기능 선언

위에서 설명한 바와 같이, 활성화 된 구성 요소에서는 `Intent`를 사용해 
Activity, Service 및 Broadcast Receiver를 시작할 수 있다. 그러기 위해선 
`Intent`에 대상 구성 요소를 인텐트 내에서 명시적으로 명명하면 된다. (구성 
요소 클래스 이름을 사용한다.)  그렇지만, 암시적 인텐트를 사용하여 구성 
요소를 시작할 수 있다.

> **암시적 인텐트**
> 

암시적 인텐트는 **수행할 작업의 유형을 설명하고, 원한다면 작업을 수행할 
대상인 데이터를 설명**할 수도 있다. 암시적 인텐트를 사용하면 시스템이 
작업을 수행할 수 있는 기기에서 구성 요소를 찾아서 작업을 시작할 수 있다.

<aside>
👉🏻 인텐트가 설명한 작업을 수행할 수 있는 구성 요소가 여러 개인 경우, 
어느 것을 사용할지는 사용자가 선택하게 된다.

</aside>

시스템은 기기에 설치된 다른 앱의 매니페스트 파일에 제공된 인텐트 필터와 
수신된 인텐트를 비교하는 방법으로 인텐트에 응답할 수 있는 구성 요소를 
식별한다.

앱의 매니페스트에서 액티비티를 선언하는 경우, 선택적으로 해당 액티비티의 
기능을 선언하는 인텐트를 포함시켜서 다른 앱으로부터의 인텐트에 응답하게 할 
수 있다.

ex) **새 이메일을 작성하는 액티비티가 포함된 이메일 앱**
      “send” 인텐트에 응답하는 인텐트 필터를 선언하는 코드 스니펫

```xml
<manifest ... >
    ...
    <application ... >
        <activity android:name="com.iemhs.lecture0.ComposeEmailActivity">
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <data android:type="*/*" />
                <category android:name="android.intent.category.DEFAULT" 
/>
            </intent-filter>
        </activity>
    </application>
</manifest>
```

다른 앱이 `ACTION_SEND` 작업이 포함된 인텐트를 생성, 이를 
`startActivity()`로 전달하면 위 인텐트 필터가 선언된 액티비티가 시작된다.

### 앱 요구사항 선언

Android로 구동되는 기기는 수없이 많지만 모두 특징이 같고, 똑같은 기능을 
제공하는 것은 아니다.

앱에 필요한 기능이 없는 기기에 앱을 설치하는 불상사를 막으려면, 앱이 
지원하는 기기 유형에 대해 명확하게 정의해주어야 하며, 이를 위해선 
매니페스트 파일에 기기와 소프트웨어 요구사항을 선언하면 된다.

이와 같은 선언은 대부분 ‘정보성’일 뿐, 시스템은 이를 읽지 않는 것이 
일반적이지만, Google Play와 같은 외부 서비스는 사용자가 본인의 기기에서 
앱을 검색할 때 필터링을 제공하기 위해 이와 같은 선언을 읽게 된다.

**ex) 앱에 카메라가 필요하며, Android 2.1(API 7)에 도입된 API를 사용하는 
경우**
      매니페스트에 요구사항을 선언하는 코드 스니펫ㄷ

```xml
<manifest ... >
    <uses-feature android:name="android.hardware.camera.any"
                  android:required="true" />
    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="19" />
    ...
</manifest>
```

위와 같은 선언을 하면, 카메라가 없고 Android 버전이 2.1 이하인 기기는 
Google Play Store에서 앱을 설치할 수 없다.

<aside>
👉🏻 다만 이런 요구사항이 **필수가 아님을 선언할 수도 있다.**
`android:required` 특성을 `**false**`로 설정하면 된다.

</aside>

## 3) 앱 리소스

Android 앱은 코드만으로 이루어지지 않는다. 소스 코드와 별도로 이미지, 
오디오 파일, 그리고 앱의 시각적 표현과 관련된 것 등의 여러 리소스가 
필요하다.

<aside>
👉🏻 **ex)** Activity 사용자 인터페이스의 애니메이션, 메뉴, 스타일, 색상, 
레이아웃 등

</aside>

Android 프로젝트에 포함하는 리소스마다 SDK 빌드 도구가 고유한 정수 ID를 
정의하는데, 이를 사용하여 리소스를 참조할 수 있다.

<aside>
👉🏻 **ex)** 앱에 `logo.png` 이름의 이미지 파일이 있다고 가정 
(`res/drawable/` 디렉토리에 저장)
⇒ SDK 도구가 `R.drawable.logo` 라는 리소스 ID를 생성
      → 이를 이용해 이미지를 참조하고 사용자 인터페이스에 삽입

</aside>

> **앱 리소스를 사용함으로 얻을 수 있는 이점**
> 
1. 코드를 수정하지 않고 **앱의 다양한 특성을 쉽게 업데이트** 할 수 있다.
    
    <aside>
    👉🏻 **ex)** UI 디자인 중 컬러에 대한 요구사항이 변경되어 수정이 
필요할 때
          (빨간색 → 옅은 빨간색)
    ⇒ `R.color.red`로 정의된 컬러 리소스의 값을 변경되면
          이 리소스를 사용 중인 모든 UI의 컬러가 변경됨.
    
    </aside>
    
2. **여러 가지 기기 구성에 맞게** 대체 리소스를 제공할 능력을 갖추게 됨
    
    <aside>
    👉🏻 **ex)** 여러 가지 언어, 화면 크기에 따른 이미지 해상도, 다크모드 
등
    
    </aside>
    
3. 대체 리소스에 대해 다양한 **한정자**를 지원함.
    - **한정자** : 리소스 디렉토리의 이름에 포함하는 짧은 문자열로, 이를 
사용해 해당 리소스를 사용할 기기 구성을 정의함.
    
    <aside>
    👉🏻 **ex)** 사용자의 언어 설정을 기반으로 적절한 언어 문자열을 UI에 
적용
          ⇒ `res/values-fr/`에 프랑스어로 번역된 UI 문자열을 정의
    
    **ex2)** 기기 화면이 세로 방향(세로로 긺)인 경우 버튼이 세로 방향으로 
되어있는 레이아웃을, 화면이 가로 방향(가로로 넓은)인 경우 버튼이 가로 
방향으로 정렬되도록 레이아웃을 따로 구성
         ⇒ `res/layout-port` (세로, 수직) , `res/layout-land` (가로, 
수평)
    
    </aside>
